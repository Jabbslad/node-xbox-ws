
var redis = require('redis')
  , util = require('util')
  , client = redis.createClient();

module.exports = {
	all: function(callback) {
		client.keys("*", function(err, keys) {
			var friends = {};
			var multi = client.multi();
			keys.forEach(function(reply, i) {
				multi.hget(reply, "status", function(err, res) {
					friends[reply] = res;
				});
			});
			multi.exec(function(err, replies) {
				callback(friends);
			});
		});	
	}
}	